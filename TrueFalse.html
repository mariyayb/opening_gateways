<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>How to use a spring to calculate mass in outer space</title>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async
                    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
            </script>
                
            <link rel="stylesheet"
                    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
                    integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
                    crossorigin="anonymous">
        <link>
                        
                        
        <style>
        html{
                background-color:DarkTurquoise;
            }
        
        body {
     /*       position:relative;*/
            margin:10px;
        }

                        
        div {
                                padding-top: 25px;
                                padding-right: 15px;
                                padding-bottom: 10px;
                                padding-left: 20px;
                                background-color:white;
                            }
                
                            html, body {
                                height: 100vh;
                            }

        .rangeslider{
            width: 30%;
        }
        
        .myslider {
            -webkit-appearance: none;
            background: #FCF3CF  ;
            width: 50%;
            height: 20px;
            opacity: 2;
        }
        
        
        .myslider::-webkit-slider-thumb {
            -webkit-appearance: none;
            cursor: pointer;
            background: #34495E  ;
            width: 5%;
            height: 20px;
        }
        
        
        .myslider:hover {
            opacity: 1;
        }
        
        </style>
    </head>

    <body>

      
        <div>
            <h1><center>True or False: How reliable are antibody test results?</center></h1>
        
        
        <p>Tests for COVID-19 antibodies have recently become available. An individual who takes such test will receive a positive or negative result. A positive result indicates that COVID-19 antibodies have been detected and so the individual has been exposed to the virus. A negative test indicates that antibodes have not been detected indicating that the individual has not been exposed to the virus. But it's not that simple. Diagnostic tests, including COVID-19 antibodies tests vary in their reliability. Two important numbers are:  </p>
        
        <ul>
        <li>The <b>specificity</b> of a diagnostic test is a number that indicates: the proportion of individuals who are truly negative and will receive a negative test result.</li>
        
        <li>The <b>sensitivity</b> of a diagnostic test is a number that indicates: the proportion of individuals who are truly positive and will receive a positive test result.</li>
            
            
        </ul>
        
        
        
        <p>Ideally, when expressed as proportions, these numbers are close to 1. (When expressed as percentages, these numbers will be close to 100%).</p>
        
        <p>You might wonder: to find out the specificity, one has to know who is truly negative, and to find out the sensitivity, one has to know who is truly positive. Then what is the point of testing? The answer is that the numbers that are provided are just <i>estimates</i> (and can be quite good estimates).</p>
        

        <div>
        <h2>Reliability of test results</h2>
        You went in to for the test and your result is ready.
        <ul>
        <li> You test positive. How many people who test positive are really <i>negative</i>? These people have received a <b>false positive</b>.
        <li> You test negative. How many people who test negative are really <i>positive</i>? These people have received a <b>false negative</b>.
        </ul>
        <p>To estimate these numbers, it is also necessary to know the <i>proportion of the population being tested</i> with the disease.</p>
        
        </div>
        
        <div>
        <h2>Reliability calculator</h2>
        <p>Let the following numbers be expressed as proportions (taking values from 0 to 1):</p>
        <ul>
            <li>\(p\) be the proportion of the population that is positive for antibodies.</li>
            <li>\(SP\) be the specificity of the test.</li>
            <li>\(SE\) be the sensitivity of the test.</li>
        </ul>
        
        From positive test results only, the proportion of individuals who are true negatives but receive a positive result is \(+True-\):
        \[+True- = \frac{(1-p)\cdot(1-SP)}{(1-p)\cdot(1-SP) +p\cdot SE}\]
        
        From negative test results only, the proportion of individuals who are true positives but receive a negative result is \(-True+\):
        \[-True+ = \frac{p\cdot (1-SE)}{p\cdot (1-SE) +(1-p)\cdot SP}\]
        <script>
        function spec_sens_rand() {
        var spec = Math.floor(Math.random() * 21+80)/100;
        document.getElementById('sp').innerHTML = "Specificity = " +spec + "   ("+spec*100+" %)";
        var sens = Math.floor(Math.random() * 21+80)/100;
        document.getElementById('sn').innerHTML = "Sensitivity = " +sens+ "   ("+sens*100+" %)";
        var prop = Math.floor(Math.random() * 101)/100;
        document.getElementById('p').innerHTML = "Proportion of positive cases in the population being tested = " +prop + "   ("+Math.round(prop*100)+" %)";
 
        var test_pos_true_neg=1000*(1-prop)*(1-spec)/((1-prop)*(1-spec)+sens*prop);
        document.getElementById('pos_true_neg').innerHTML = "Out of 1,000 people who <b>receive a positive test result</b>, about " +Math.round(test_pos_true_neg) + " will receive an <b>incorrect result</b>: they are truly negative!";
        var test_neg_true_pos=1000*prop*(1-sens)/((prop)*(1-sens)+spec*(1-prop));
        document.getElementById('neg_true_pos').innerHTML = "Out of 1,000 people who <b>receive a negative test result</b>, about " +Math.round(test_neg_true_pos) + " will receive an <b>incorrect result</b>: they are truly positive!";
   
        return false
        }
        </script>

        <form name="false_positive">
            <input type="button" value="Try an example" onclick="spec_sens_rand();" />
            <div id='sp'></div>
            <div id='sn'></div>
            <div id='p'></div>
            <div id='pos_true_neg'></div>
            <div id='neg_true_pos'></div><br>
            &nbsp;&nbsp;&nbsp;
         
        
  

        <h3>Questions:</h3>
        <p>Assume that sensitivity and specificity are constant. Answer the question below and turn in your work. Also include a plot of +True- and -True+ as functions of \(p\).</p>
        <ol>
        <li>For what value of \( p \) is +True- maximized?</li>
        <li>For what  value of \( p \) is +True- minimized?</li>
        <li>For what  value of \( p \) is -True+ maximized?</li>
        <li>For what  value of \( p \) is -True+ minimized?</li>
        </ol>
        <p>Remember that \(p\) is a proportion and so is a number between 0 and 1.</p>
        </div>
        <div>
        <h2> Accuracy </h2>
        <p>Overall test accuracy is simply the proportion:
        
        \[Accuracy = \frac{\text{correct tests}}{\text{total tests}}.\] Be careful if this is the only number you know.</p>
        <p>As a function of \(p, SP,\) and \(SE\),
        \[Accuracy = p\cdot SE + (1-p)\cdot SP\]</p>
        <h1>Questions:</h1>
        <ol>
        <li>Suppose \(p = 0.02\), that is 2% of the population is positive. Suppose the test correectly identifies all negative cases and incorrectly identifies all positive cases. What is the overall accuracy?</li>
        <li>Suppose \(p = 0.98\), that is 98% of the population is positive. Suppose the test correectly identifies all negative cases and incorrectly identifies all positive cases. What is the overall accuracy?</li>
        <li>Supose \(SP\) and \(SE\) are both \(0.95\). For what value of \(p\) is the accuracy maximized? For what value of \(p\) is the accuracy minimized?</li>
        <li>Supose \(SP\) and \(SE\) are unknown constants. For what value of \(p\) is the accuracy maximized? For what value of \(p\) is the accuracy minimized? What do you need to know about \(SP\) and \(SE\) to answer this question?</li>
        <li>In the presense of antibodies actually leads to immunity from COVID-19, and there is a reliable antibody test, the ideas of allowing people back to work based on their immunity status has been brought up. In practice, diagnostic tests rarely have both specificity and sensitivity equal to 1 (100%). If officials had to choose between two tests for this purpose:
                <ul>
                    <li><b>Test A:</b> with \(SP=0.95\) and \(SE=1\).</li>
                    <li><b>Test B:</b> with \(SP=1\) and \(SE=0.95\).</li>
                </ul>
            which test should they choose and why?</li>
        </ol>
        
        </div>
        
       
       <p></p>

        
    </body>
</html>

